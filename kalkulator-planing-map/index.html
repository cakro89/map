<!DOCTYPE html>
<html>
<meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
<head>
<title>FTTH Calculator</title>

<!-- SCRIPT UTAMA -->
<script src="ok-boss.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- CSS UTAMA -->
<link href="style.css" rel="stylesheet"/>

<!-- CSS STYLE BACKGROUND UNTUK STYLE1–4 -->
<style>
#myDiagramDiv.bg1 {
    background: linear-gradient(135deg, #141414, #000000) !important;
}
#myDiagramDiv.bg2 {
    background: linear-gradient(135deg, #1f3b70, #0a1a33) !important;
}
#myDiagramDiv.bg3 {
    background: linear-gradient(135deg, #1a7030, #0d3319) !important;
}
#myDiagramDiv.bg4 {
    background: linear-gradient(135deg, #70441a, #331c0a) !important;
}
</style>


</head>
<body>

<!-- HEADER + MENU -->
<div class="header-container">
	<h1>FTTH Calculator</h1>

	<div id="controls">
		<input type="file" id="loadFile" accept=".json" onchange="loadJsonFromFile()" style="display:none"/>

		<button onclick="resetDiagram()" title="Ctrl + R">Reset</button>
		<button onclick="undoAction()" title="Ctrl + Z">Undo</button>
		<button onclick="autoCenter()" title="Ctrl + C">Center</button>
		<button onclick="exportPng()" title="Ctrl + E">Export</button>
		<button onclick="saveJson()" title="Ctrl + S">Save</button>
		<button onclick="document.getElementById('loadFile').click()" title="Ctrl + O">Load</button>
		<button onclick="toggleDiagramOrientation()" title="Ctrl + T">Orientation</button>

		<!-- SAYA UBAH DI SINI -->
		<select id="linkStyleSelect" onchange="changeLinkStyle(); changeDiagramBackground(this.value)" title="Ctrl + L">
			<option value="normal">Style1</option>
			<option value="bezier">Style2</option>
			<option value="ortho1">Style3</option>
			<option value="ortho2">Style4</option>
		</select>
	</div>
</div>

<!-- AREA UTAMA DIAGRAM & MAP -->
<div id="myDiagramDiv"></div>
<div id="myOverviewDiv"></div>

<!-- PANEL SPLITTER -->
<div id="splitterPanel">
	<label>Select Splitter:</label><br>
	<select id="splitterSelect"></select>

	<div id="originalEstimate" style="color:#888; font-size:0.85rem;"></div>

	<details id="extraLossesBox" open class="extra-losses">
	<summary><span id="labelExtraLosses"><b>Extra Losses</b> : </span><span id="lossTotalCell"></span></summary>

	<table class="extra-losses-table">
	<tr>
		<td>Cable <input id="cableLength" type="number" step="100" value="200" min="0"/>m</td>
		<td class="right" id="lossCableCell">-0.00 dB</td>
	</tr>
	<tr>
		<td>Splicing x2</td>
		<td class="right" id="lossSpliceCell">-0.00 dB</td>
	</tr>
	<tr>
		<td>Connector x2</td>
		<td class="right" id="lossConnectorCell">-0.00 dB</td>
	</tr>
	<tr>
		<td>Others</td>
		<td class="right" id="lossOthersCell">-0.00 dB</td>
	</tr>
	</table>
	</details>

	<div id="lossesEstimate" style="margin-top:6px; color:#555; font-size:0.65rem;"></div>
	<div id="splitterEstimate"></div>

	<div style="display: flex; gap: 6px; margin-top: 6px;">
		<button style="flex: 1;" onclick="cancelAddSplitter()">Cancel</button>
		<button style="flex: 1;" onclick="setSplitter()">OK</button>
	</div>
</div>

<div id="blurOverlay"></div>

<!-- EXTRA SETTINGS -->
<details id="ExtraSettings" class="extra-settings">
<summary style="cursor:pointer;"><b>Extra Settings</b></summary>

<table>
<tr>
	<td>Cable (per 1000m)</td>
	<td><input id="lossCable" type="number" step="0.01" value="-0.35" max="0" style="width:60px;"/>dB</td>
</tr>
<tr>
	<td>Splicing</td>
	<td><input id="lossSplice" type="number" step="0.01" value="-0.03" max="0" style="width:60px;"/>dB</td>
</tr>
<tr>
	<td>Connector</td>
	<td><input id="lossConnector" type="number" step="0.01" value="-0.30" max="0" style="width:60px;"/>dB</td>
</tr>
<tr>
	<td>Others</td>
	<td><input id="lossOthers" type="number" step="-0.30" value="-0.30" max="0" style="width:60px;"/>dB</td>
</tr>
</table>

</details>

<textarea id="jsonArea" placeholder="JSON model"></textarea>

<!-- SCRIPT UTAMA -->
<script src="script.js"></script>

<!-- SCRIPT UNTUK BACKGROUND STYLE1–4 -->
<script>
function changeDiagramBackground(style) {
	const div = document.getElementById("myDiagramDiv");

	div.classList.remove("bg-style1", "bg-style2", "bg-style3", "bg-style4");

	if (style === "normal") div.classList.add("bg-style1");
	if (style === "bezier") div.classList.add("bg-style2");
	if (style === "ortho1") div.classList.add("bg-style3");
	if (style === "ortho2") div.classList.add("bg-style4");
}
</script>

</body>
</html>
